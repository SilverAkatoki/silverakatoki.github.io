import{d as x,r as m,l as n,m as L,w as b,c as u,b as r,j as h,u as P,t as f,k as U,f as B,h as I,p as V,F as G,g as N,G as $,i,q,A as H,_ as j}from"./index-CjERqYae.js";import{D as M,c as z,S as c,b as K,A as O,F as W,d as J,a as Q}from"./ArticleSearchPanel-DFbyT6RG.js";const X={class:"body_container"},Y={class:"tag-tip-container"},Z=["src"],ee={class:"tag-tip tag-tip-name"},te={class:"filter-container"},se={class:"article-count-container"},ae={key:0},oe={key:1},re={class:"article-count"},le={class:"articles"},ne={class:"articles-container"},ie={key:0,class:"empty-state"},ce=x({__name:"Tag",setup(ue){const A=$(),v=m("Vue"),g=m(""),p=m({...M}),d=m(z()),D=n(()=>{const{sortProperty:e}=p.value;return e===c.DEFAULT||e===c.UPDATED_DATE}),y=n(()=>{const{sortProperty:e}=p.value;return e===c.DEFAULT}),T=/<span>(.*?)<\/span>/gi,E=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),S=n(()=>d.value.rules.some(e=>e.values.length>0)),F=(e,t)=>{const a=t.type===W.TAG?e.tags:e.categories;return t.operator==="eq"?t.values.some(o=>a.includes(o)):t.values.every(o=>!a.includes(o))},R=e=>{const t=d.value.rules.filter(o=>o.values.length>0);if(t.length===0)return e;const a=d.value.matchMode==="all";return e.filter(o=>{const s=t.map(l=>F(o,l));return a?s.every(Boolean):s.some(Boolean)})},k=n(()=>L.filter(e=>e.tags.includes(v.value))),w=n(()=>{const e=g.value.trim(),t=k.value.map(s=>({...s,title:s.title.replace(T,"$1")})).filter(s=>s.title.toLocaleLowerCase().replace(/\s+/g,"").includes(e.toLocaleLowerCase().replace(/\s+/g,""))),a=R(t);if(e==="")return a;const o=new RegExp(E(e.replace(/\s+/g,"")).split("").join("\\s*"),"gi");return a.map(s=>({...s,title:s.title.replace(o,l=>`<span>${l}</span>`)}))}),_=n(()=>{const e=[...w.value],{sortDirection:t,sortProperty:a}=p.value;if(a===c.DEFAULT)return e.sort((s,l)=>l.updatedDate.localeCompare(s.updatedDate));const o=t==="ASC"?1:-1;if(c.CREATED_DATE===a)return e.sort((s,l)=>o*s.createdDate.localeCompare(l.createdDate));if(c.UPDATED_DATE===a)return e.sort((s,l)=>o*s.updatedDate.localeCompare(l.updatedDate));throw Error("Invalid sort property")}),C=(e,t,a)=>{p.value={...t},g.value=e,d.value=Q(a)};return b(()=>A.query.tag,e=>{typeof e=="string"&&e.trim()!==""&&J.tags.some((t=>t[0]===e))&&(v.value=e)},{immediate:!0}),(e,t)=>{const a=I("router-link");return i(),u("div",X,[r("div",Y,[r("img",{class:"tag-tip-img",src:P(K),alt:""},null,8,Z),t[1]||(t[1]=r("p",{class:"tag-tip"},"这里是标签",-1)),r("p",ee,f(v.value),1),t[2]||(t[2]=r("p",{class:"tag-tip"},"的汇总",-1)),h(a,{to:"/articles",class:"tag-tip"},{default:U(()=>[...t[0]||(t[0]=[B("返回归档页",-1)])]),_:1})]),r("div",te,[h(O,{onSubmit:C}),r("div",se,[g.value===""&&!S.value?(i(),u("span",ae,"这个标签有")):(i(),u("span",oe,"已筛选出")),r("span",re,f(_.value.length),1),t[3]||(t[3]=r("span",null,"篇文章",-1))])]),r("div",le,[t[4]||(t[4]=r("div",{style:{"border-bottom":"2px solid #aaa","margin-top":"25px","margin-bottom":"1em"}},null,-1)),r("div",ne,[(i(!0),u(G,null,N(_.value,o=>(i(),q(H,{key:o.uuid,article:o,"is-show-updated-date":D.value,"is-show-placeholder":y.value},null,8,["article","is-show-updated-date","is-show-placeholder"]))),128)),_.value.length===0?(i(),u("p",ie," 没有找到匹配的文章 ")):V("",!0)])])])}}}),me=j(ce,[["__scopeId","data-v-eb48966f"]]);export{me as default};
